/* eslint-disable @next/next/no-img-element */
import React, { useState, useEffect } from "react";
import Sidenav from "@/components/customerpanel/sidenav";
import Topnav from "@/components/customerpanel/topnav";
import Footernav from "@/components/customerpanel/footernav";
import axios from "axios";
import Link from "next/link";
import { data } from "autoprefixer";
import { useRouter } from "next/router";

const Dashboard = () => {
  const router = useRouter();
  const [profiles, setprofiles] = useState([]);
  const [profileslength, setprofileslength] = useState([]);
  const [filtersmale, setfiltermale] = useState([]);
  const [filtersfemale, setfilterfemale] = useState([]);

  useEffect(() => {
    async function getUser() {
      var config = {
        method: "get",
        maxBodyLength: Infinity,
        url: "http://172.105.57.17:1337/api/profiles/?populate=%2A",
        headers: {
          Authorization:
            "Bearer Bearer 3ad527b6e04e45a25b5c7a57d8e796af06f0853e2fa7c4551566c2096b18b80500bdaf2fc61dace337df1dc8c2a0026075026b10589f9c9d009a72165635b72012c305bf52929b73a79c97e1e5a53e7193f812604f83fa679731fa19540e9ecd7112dc224f0cccd4624294b05ec2864b552bdf7905d65736410f0cf2774c3994",
        },
      };

      axios(config)
        .then(function (response) {
          setprofiles(response.data.data);
          setprofileslength(response.data.data.length);
          let male = [];
          let female = [];

          let profile_data = response.data.data;
          for (let i = 0; i < response.data.data.length; i++) {
            if (profile_data[i].attributes.Chooese_groom_bride == "Groom") {
              male.push(profile_data[i]);
            } else {
              female.push(profile_data[i]);
            }
          }
          setfilterfemale(female.length);
          setfiltermale(male.length);
        })
        .catch(function (error) {
          console.log(error);
        });
    }

    getUser();
  }, []);

  return (
    <>
      <Sidenav />
      <Topnav />
      <div className="p-4 sm:ml-64">
        <div className="p-4 border-gray-200 rounded">
          <div className="grid lg:grid-cols-4 md:grid-cols-2 sm:grid-cols-2 gap-4 mb-4">
            <div className="flex items-center justify-center h-24 rounded bg-gray-50">
              <div className="grid grid-rows-2 gap-2 flex-1 justify-start align-middle ml-6">
                <span style={{ fontSize: "1.5rem" }}>{profileslength}</span>
                <p className="text-sm">Total Profile</p>
              </div>
              <svg
                style={{
                  marginRight: "1rem",
                  borderRadius: "50%",
                  background: "rgba(249, 139, 29, 0.2)",
                }}
                width="50"
                height="50"
                viewBox="0 0 50 50"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path
                  d="M34.9093 31.6848C34.9093 31.6848 29.3274 30.2577 28.5401 28.705C28.1821 27.9943 28.5361 27.0842 28.8941 26.4578C29.0581 26.2391 29.2181 26.007 29.3724 25.7608V25.758C30.3046 24.2793 31.0154 22.3276 31.0879 19.9168C31.1972 16.2922 28.3745 13.3482 25.0261 13.3398H25.0179H25.0111C21.6626 13.348 18.8403 16.2922 18.9496 19.9168C19.0221 22.3279 19.7328 24.2793 20.6635 25.758L20.6651 25.7608C20.8194 26.007 20.9794 26.2391 21.1434 26.4578C21.5014 27.0838 21.857 27.9942 21.4961 28.705C20.7117 30.2577 15.1269 31.6848 15.1269 31.6848C14.0528 32.0403 13.2777 33.0513 13.2777 34.2407V36.6925H36.7585V34.2407C36.7585 33.0513 35.985 32.04 34.9093 31.6848Z"
                  fill="#F98B1D"
                />
                <path
                  d="M46.0661 33.0503V33.0478C46.0046 33.0284 42.0028 32.0118 41.4302 30.8828C41.1706 30.3661 41.4261 29.7044 41.6886 29.2511C41.8073 29.0899 41.9238 28.9202 42.0357 28.7425C42.7123 27.6628 43.2304 26.2469 43.2837 24.4946C43.3627 21.8569 41.3098 19.7165 38.8715 19.7109H38.8674H38.8605C36.4237 19.7166 34.3683 21.8566 34.4501 24.4946C34.502 26.2466 35.02 27.6628 35.6967 28.7425C35.8101 28.9202 35.9263 29.0899 36.0466 29.2511C36.0644 29.2811 36.0822 29.3139 36.1 29.3467C38.0764 30.164 39.3801 32.0828 39.3801 34.2401V36.6919H47.4107V34.9096C47.4104 34.0429 46.8486 33.3103 46.0658 33.0504L46.0661 33.0503Z"
                  fill="#F98B1D"
                />
                <path
                  d="M13.9909 29.2511C14.1096 29.0899 14.2274 28.9205 14.3408 28.7425C15.0172 27.6628 15.5352 26.2469 15.5874 24.4946C15.6695 21.8569 13.6135 19.7165 11.177 19.7109H11.1701H11.166C8.72767 19.7166 6.67479 21.8566 6.75413 24.4946C6.80755 26.2466 7.32397 27.6628 8.00195 28.7425C8.11379 28.9202 8.23001 29.0899 8.35029 29.2511C8.61147 29.7047 8.86702 30.3664 8.60584 30.8828C8.03319 32.0118 4.0327 33.0284 3.97119 33.0478V33.0503C3.18797 33.3102 2.625 34.0428 2.625 34.9092V36.6915H10.6572V34.2397C10.6572 32.083 11.9612 30.1639 13.9376 29.3463C13.9551 29.3138 13.9729 29.281 13.9907 29.251L13.9909 29.2511Z"
                  fill="#F98B1D"
                />
              </svg>
            </div>
            <div className="flex items-center justify-center h-24 rounded bg-gray-50">
              <div className="grid grid-rows-2 gap-2 flex-1 justify-start align-middle ml-6">
                <span style={{ fontSize: "1.5rem" }}>{filtersmale}</span>
                <p className="text-sm">Total Male Profile</p>
              </div>
              <svg
                style={{
                  marginRight: "1rem",
                  borderRadius: "50%",
                  background: "rgba(249, 139, 29, 0.2)",
                }}
                width="50"
                height="50"
                viewBox="0 0 50 50"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
              >
                <circle
                  cx="25"
                  cy="25"
                  r="25"
                  fill="#F98B1D"
                  fillOpacity="0.2"
                />
                <path
                  d="M27.2798 10.7076L27.3552 10.6321C27.3552 10.6321 27.2798 10.6321 27.2798 10.5566V10.7076V10.7076Z"
                  fill="#F98B1D"
                />
                <path
                  d="M23.2838 18.3967C23.2838 18.8967 22.8784 19.3016 22.3789 19.3016C21.8793 19.3016 21.474 18.8967 21.474 18.3967C21.474 17.8972 21.8793 17.4922 22.3789 17.4922C22.8784 17.4922 23.2838 17.8972 23.2838 18.3967Z"
                  fill="#F98B1D"
                />
                <path
                  d="M27.6568 17.4922C27.2043 17.4922 26.7519 17.8692 26.7519 18.3971C26.7519 18.8495 27.1288 19.302 27.6568 19.302C28.1092 19.302 28.5617 18.925 28.5617 18.3971C28.5617 17.8692 28.1847 17.4922 27.6568 17.4922Z"
                  fill="#F98B1D"
                />
                <path
                  d="M25.0179 23.6753C25.9978 23.6753 26.7518 22.9214 26.7518 21.9414H23.208C23.2838 22.8463 24.0378 23.6753 25.0178 23.6753H25.0179Z"
                  fill="#F98B1D"
                />
                <path
                  d="M30.5972 6.10748H20.1925C18.3076 6.10748 16.7242 7.61541 16.7242 9.57581V10.5558C15.8193 11.2343 15.2162 12.2897 15.2162 13.4207V15.3811C15.2162 15.6826 15.2917 15.9841 15.3672 16.2105C15.7442 15.909 16.1966 15.6075 16.6491 15.4565V15.2305C16.6491 13.1196 18.3831 11.3852 20.4944 11.3852H23.5099C23.6609 11.3852 23.736 11.3852 23.8114 11.3097L25.3948 10.4048C26.1488 9.95234 27.0538 9.7263 27.9582 9.7263C29.1647 9.7263 30.2956 10.1788 31.2756 10.9327L31.8035 11.3852C32.7084 12.1392 33.236 13.2701 33.236 14.4765V15.4565C33.5375 15.532 33.7639 15.758 34.0654 15.909V9.65125C34.0654 7.61535 32.482 6.10742 30.5971 6.10742L30.5972 6.10748Z"
                  fill="#F98B1D"
                />
                <path
                  d="M34.6687 24.202L32.4068 24.805C31.3513 27.0669 29.3154 28.6503 26.9781 29.2533L25.8471 32.2692C25.8471 32.3447 25.7716 32.4952 25.7716 32.5707L26.5256 43.1262C26.5256 43.5032 26.9026 43.8047 27.2796 43.8047H30.2954C30.6724 43.8047 31.0494 43.4277 31.0494 43.0507V38.6779L33.2358 33.5512C33.3113 33.3251 33.3113 33.1742 33.2358 32.9481C33.1603 32.7221 33.0098 32.6466 32.7833 32.5712L31.4264 32.1187L35.4977 25.4085C35.6487 25.1825 35.6487 24.8055 35.4222 24.5791C35.272 24.2021 34.895 24.1266 34.6686 24.2021L34.6687 24.202Z"
                  fill="#F98B1D"
                />
                <path
                  d="M23.133 29.2547C20.7201 28.7268 18.6847 26.9928 17.5538 24.7309L15.3674 24.203C15.0658 24.1275 14.7643 24.203 14.6134 24.5045C14.4625 24.7306 14.3874 25.1075 14.5379 25.334L18.6092 32.0441L17.2523 32.4966C17.0263 32.5721 16.8753 32.7226 16.7998 32.8736C16.7244 33.0996 16.7244 33.326 16.7998 33.4766L18.9862 38.6034V43.0521C18.9862 43.429 19.3632 43.806 19.7402 43.806H22.7561C23.133 43.806 23.51 43.5045 23.51 43.1275L24.264 32.572C24.264 32.4965 24.264 32.346 24.1885 32.2705L23.133 29.2547Z"
                  fill="#F98B1D"
                />
                <path
                  d="M12.8036 43.0517C12.8036 43.5041 13.1051 43.8056 13.5576 43.8056H17.6289C17.5538 43.5796 17.4783 43.2777 17.4783 43.0517V38.9803L15.3674 34.1551C15.1414 33.552 15.1414 32.8731 15.3674 32.3456C15.5184 31.8932 15.8954 31.5917 16.3474 31.2902L15.9704 30.6113C14.0855 31.5913 12.8036 33.5517 12.8036 35.8136L12.8036 43.0517Z"
                  fill="#F98B1D"
                />
                <path
                  d="M37.2322 43.0517V35.8136C37.2322 33.5517 35.9502 31.5913 34.0653 30.6113L33.6884 31.2143C34.1408 31.4404 34.4423 31.8174 34.6683 32.2698C34.8944 32.7977 34.8944 33.4762 34.6683 34.0792L32.5574 38.9804V43.0517C32.5574 43.3532 32.4819 43.5796 32.4065 43.8811H36.4778C36.9302 43.8057 37.2321 43.5041 37.2321 43.0517L37.2322 43.0517Z"
                  fill="#F98B1D"
                />
                <path
                  d="M31.8036 16.5885L31.7281 14.4021C31.7281 13.6481 31.4266 12.9696 30.8232 12.5171L30.2957 12.0647C29.1647 11.0847 27.5058 10.9337 26.1488 11.6877L24.5654 12.5926C24.2639 12.7432 23.8869 12.8941 23.51 12.8941H20.4941C19.2122 12.8941 18.1567 13.9496 18.1567 15.2315V16.8149C18.0813 16.8149 18.0058 16.7395 17.9307 16.7395C16.5737 16.7395 15.4428 17.8704 15.4428 19.2274C15.4428 20.6598 16.5737 21.7153 17.9307 21.7153C18.0062 21.7153 18.1567 21.7153 18.2322 21.6398C18.6092 25.1836 21.4741 27.8975 24.8669 27.8975L25.0178 27.8979C28.4862 27.8979 31.3511 25.108 31.728 21.5647H31.8035C33.1605 21.5647 34.2914 20.4337 34.2914 19.0768C34.2914 17.7194 33.1605 16.5885 31.8035 16.5885L31.8036 16.5885ZM30.2202 20.8862C30.2202 23.9776 27.8828 26.4655 25.0179 26.4655H24.867C22.0021 26.4655 19.6647 23.9776 19.6647 20.8862V15.2315C19.6647 14.7791 20.0417 14.4021 20.4941 14.4021H23.51C24.113 14.4021 24.7919 14.2511 25.3194 13.9496L26.9028 13.0447C27.6568 12.5923 28.6368 12.6677 29.3157 13.2708L29.9187 13.7232C30.1448 13.9492 30.2957 14.1757 30.2957 14.4772V20.8862H30.2202Z"
                  fill="#F98B1D"
                />
              </svg>
            </div>
            <div className="flex items-center justify-center h-24 rounded bg-gray-50">
              <div className="grid grid-rows-2 gap-2 flex-1 justify-start align-middle ml-6">
                <span style={{ fontSize: "1.5rem" }}>{filtersfemale}</span>
                <p className="text-sm">Total Female Profile</p>
              </div>
              <svg
                style={{
                  marginRight: "1rem",
                  borderRadius: "50%",
                  background: "rgba(249, 139, 29, 0.2)",
                }}
                width="50"
                height="50"
                viewBox="0 0 50 50"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
              >
                <circle
                  cx="25"
                  cy="25"
                  r="25"
                  fill="#F98B1D"
                  fillOpacity="0.2"
                />
                <path
                  d="M22.3989 17.4844C21.9481 17.4844 21.4972 17.86 21.4972 18.3861C21.4972 18.837 21.8729 19.2879 22.3989 19.2879C22.8498 19.2879 23.3007 18.9122 23.3007 18.3861C23.3007 17.9353 22.8498 17.4844 22.3989 17.4844Z"
                  fill="#F98B1D"
                />
                <path
                  d="M27.6583 17.4844C27.2074 17.4844 26.7565 17.86 26.7565 18.3861C26.7565 18.837 27.1322 19.2879 27.6583 19.2879C28.1092 19.2879 28.56 18.9122 28.56 18.3861C28.56 17.9353 28.1844 17.4844 27.6583 17.4844Z"
                  fill="#F98B1D"
                />
                <path
                  d="M25.0286 23.6459C26.0051 23.6459 26.7565 22.8945 26.7565 21.918H23.225C23.3006 22.8945 24.0519 23.6459 25.0285 23.6459H25.0286Z"
                  fill="#F98B1D"
                />
                <path
                  d="M27.6583 6.21494H22.399C19.694 6.21494 17.5153 8.39373 17.5153 11.0986V13.3527C18.8675 10.4978 21.6476 8.46895 24.8782 8.46895H25.0286C28.4096 8.46895 31.2645 10.5725 32.542 13.5779V11.1734C32.542 8.39363 30.3632 6.21484 27.6583 6.21484L27.6583 6.21494Z"
                  fill="#F98B1D"
                />
                <path
                  d="M31.7907 21.6932C33.143 21.6932 34.27 20.5662 34.27 19.2139C34.27 17.7865 33.143 16.7347 31.7907 16.7347H31.7155C31.5651 12.978 28.635 9.97266 25.0287 9.97266H24.8783C21.1968 9.97266 18.2667 13.0532 18.1915 16.8852C18.1163 16.8852 18.0411 16.81 17.9662 16.81C16.614 16.81 15.487 17.937 15.487 19.2892C15.487 20.6414 16.614 21.7684 17.9662 21.7684C18.0414 21.7684 18.1915 21.7684 18.2667 21.6932C18.6424 25.2247 21.4973 27.9291 24.8783 27.9291H25.0287C28.4849 27.9291 31.3398 25.149 31.7155 21.618C31.7155 21.6932 31.7907 21.6932 31.7907 21.6932L31.7907 21.6932ZM30.2128 17.1851V20.9418C30.2128 24.0224 27.8836 26.5016 25.0287 26.5016H24.8783C22.0234 26.5016 19.6941 24.0224 19.6941 20.9418V16.9599C19.6941 13.8793 22.0234 11.4001 24.8783 11.4001L25.0287 11.3997C27.8836 11.3997 30.2128 13.879 30.2128 16.9595V17.0348V17.1852V17.1851Z"
                  fill="#F98B1D"
                />
                <path
                  d="M28.8604 28.4551C27.7334 29.056 26.456 29.4317 25.0285 29.4317H24.8781C23.5259 29.4317 22.2484 29.056 21.1214 28.5299C21.0462 28.6803 20.971 28.8304 20.8209 28.9808L19.7692 29.3565C21.2718 30.183 22.9997 30.7087 24.8033 30.7087C26.6817 30.7087 28.4096 30.1826 29.9875 29.3565L29.0857 29.056C29.0105 28.8307 28.9357 28.6051 28.8605 28.4551L28.8604 28.4551Z"
                  fill="#F98B1D"
                />
                <path
                  d="M24.8784 38.5226C20.5208 38.5226 16.3132 37.02 13.0824 34.2398C12.932 34.7659 12.8571 35.2164 12.8571 35.8177V43.0307C12.8571 43.4816 13.1576 43.782 13.6085 43.782H17.2147V41.0019C17.2147 40.401 17.5904 39.8749 17.9661 39.8749C18.4169 39.8749 18.7174 40.401 18.7174 41.0019L18.7178 43.782H31.2651V41.0019C31.2651 40.401 31.5656 39.8749 32.0165 39.8749C32.3921 39.8749 32.7678 40.401 32.7678 41.0019L32.7674 43.782H36.3737C36.8245 43.782 37.125 43.4816 37.125 43.0307V35.8177C37.125 35.2168 37.0498 34.6155 36.8245 34.0898C33.594 36.9447 29.3864 38.5226 24.8783 38.5226H24.8784Z"
                  fill="#F98B1D"
                />
                <path
                  d="M24.8784 37.0207C29.086 37.0207 33.2936 35.518 36.5242 32.4375C36.8246 32.137 36.8246 31.6109 36.5242 31.3104L34.1197 28.9812C33.8192 28.6807 33.218 28.6807 32.9175 28.9812C28.4847 33.1888 21.3469 33.1888 16.9891 28.9812C16.6886 28.6807 16.0873 28.6807 15.7869 28.9812L13.3824 31.3104C13.0819 31.6109 13.0819 32.137 13.3824 32.4375C16.4637 35.518 20.6712 37.0207 24.8788 37.0207H24.8784Z"
                  fill="#F98B1D"
                />
              </svg>
            </div>
            <div className="flex items-center justify-center h-24 rounded bg-gray-50">
              <div className="grid grid-rows-2 gap-2 flex-1 justify-start align-middle ml-6">
                <span style={{ fontSize: "1.5rem" }}>250</span>
                <p className="text-sm">Total Paid Members</p>
              </div>
              <svg
                style={{
                  marginRight: "1rem",
                  borderRadius: "50%",
                  background: "rgba(249, 139, 29, 0.2)",
                }}
                width="50"
                height="50"
                viewBox="0 0 50 50"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
              >
                <circle
                  cx="25"
                  cy="25"
                  r="25"
                  fill="#F98B1D"
                  fillOpacity="0.2"
                />
                <path
                  d="M15.7186 7.8651L19.173 17.1284C20.9539 16.3755 22.9142 15.9571 24.9702 15.9571C26.9184 15.9571 28.7711 16.3397 30.4806 17.0209L35.5727 8.9406C35.5727 8.9406 33.4211 7.32694 31.4609 9.1199C29.5004 10.9008 28.066 5.89258 26.4644 5.89258C24.8628 5.89258 23.0698 9.46647 20.9183 8.40272C18.7667 7.32694 17.1531 5.89258 15.7187 7.86483L15.7186 7.8651Z"
                  fill="#F98B1D"
                />
                <path
                  d="M24.9819 17.75C17.6905 17.75 11.7857 23.6547 11.7857 30.9462C11.7857 38.2376 17.6904 44.1423 24.9819 44.1423C32.2733 44.1423 38.178 38.2376 38.178 30.9462C38.178 23.6547 32.2733 17.75 24.9819 17.75ZM23.2246 37.8912L18.1205 33.3491L19.5072 31.7952L22.9495 34.8552L30.193 25.5796L31.8424 26.8588L23.2246 37.8912Z"
                  fill="#F98B1D"
                />
              </svg>
            </div>
          </div>
          <h1 className="ml-3 text-lg">New Users</h1>

          <div className="relative overflow-x-auto mt-8 mb-[4rem]">
            <table className="text-sm text-left text-gray-500">
              <thead
                style={{
                  color: "rgba(30, 30, 30, 0.5)",
                  fontWeight: "400",
                }}
                className="text-xs  uppercase "
              >
                <tr>
                  <th scope="col" className="px-6 py-3">
                    Reg.No
                  </th>
                  <th scope="col" className="px-6 py-3">
                    Profile
                  </th>
                  <th scope="col" className="px-6 py-3">
                    Email
                  </th>
                  <th scope="col" className="px-6 py-3">
                    Mobile Number
                  </th>
                  <th scope="col" className="px-6 py-3">
                    Action
                  </th>
                </tr>
              </thead>
              {profiles.length > 0 &&
                profiles.map((itms, index) => {
                  // console.log("itmssss", itms);
                  return (
                    <tbody key={index}>
                      <tr className="bg-white border-b">
                        <td
                          scope="row"
                          className="px-6 py-4 font-medium text-gray-900 whitespace-nowrap"
                        >
                          01213
                        </td>
                        <td className="py-3 px-6 text-left">
                          <div className="flex items-center">
                            <div className="mr-2 hover:transform hover:scale-150 duration-300">
                              <img
                                alt="logo"
                                className="w-6 h-6 rounded-full cusrsor-pointer"
                                src={`http://172.105.57.17:1337${itms.attributes.profile_photo.data[0].attributes.url}`}
                                width={100}
                                height={100}
                              />
                            </div>
                            <span className="cusrsor-pointer">
                              {itms.attributes.first_name}{" "}
                              {itms.attributes.last_name}
                            </span>
                          </div>
                        </td>
                        <td className="px-6 py-4">{itms.attributes.email}</td>
                        <td className="px-6 py-4">
                          {itms.attributes.phone_number}
                        </td>
                        <td className="px-6 py-4">
                          <svg
                            onClick={() => {
                              router.push({
                                pathname: "/profiledetail/[id]/",
                                query: { id: itms.id },
                              });
                            }}
                            width="24"
                            height="24"
                            viewBox="0 0 24 24"
                            fill="none"
                            xmlns="http://www.w3.org/2000/svg"
                          >
                            <path
                              d="M12 6.5C13.8387 6.49389 15.6419 7.00678 17.2021 7.97973C18.7624 8.95267 20.0164 10.3462 20.82 12C19.17 15.37 15.8 17.5 12 17.5C8.2 17.5 4.83 15.37 3.18 12C3.98362 10.3462 5.23763 8.95267 6.79788 7.97973C8.35813 7.00678 10.1613 6.49389 12 6.5ZM12 4.5C7 4.5 2.73 7.61 1 12C2.73 16.39 7 19.5 12 19.5C17 19.5 21.27 16.39 23 12C21.27 7.61 17 4.5 12 4.5ZM12 9.5C12.663 9.5 13.2989 9.76339 13.7678 10.2322C14.2366 10.7011 14.5 11.337 14.5 12C14.5 12.663 14.2366 13.2989 13.7678 13.7678C13.2989 14.2366 12.663 14.5 12 14.5C11.337 14.5 10.7011 14.2366 10.2322 13.7678C9.76339 13.2989 9.5 12.663 9.5 12C9.5 11.337 9.76339 10.7011 10.2322 10.2322C10.7011 9.76339 11.337 9.5 12 9.5ZM12 7.5C9.52 7.5 7.5 9.52 7.5 12C7.5 14.48 9.52 16.5 12 16.5C14.48 16.5 16.5 14.48 16.5 12C16.5 9.52 14.48 7.5 12 7.5Z"
                              fill="#F98B1D"
                            />
                          </svg>
                        </td>
                      </tr>
                    </tbody>
                  );
                })}
            </table>
          </div>
        </div>
      </div>
      <Footernav />
      
    </>
  );
};

export default Dashboard;
